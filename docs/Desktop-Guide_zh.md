[English](Desktop-Guide.md)

# Plan Cascade - Desktop Application Guide

**版本**: 4.0.0
**最后更新**: 2026-01-29
**状态**: 规划中 (Phase 2)

本文档介绍 Plan Cascade Desktop 桌面应用的使用方法。

---

## 概述

Plan Cascade Desktop 是 CLI 的图形化版本，提供与 CLI 完全相同的功能，以更直观的界面呈现。

### 核心特性

- **双模式切换** - 简单模式/专家模式一键切换
- **可视化 PRD 编辑** - 拖拽、依赖关系可视化
- **实时进度监控** - 图形化执行进度
- **工具调用预览** - 实时显示 Agent 操作
- **文件变更 Diff** - 代码变更实时预览
- **Claude Code GUI** - 可作为 Claude Code 的图形前端

---

## 安装

### Windows

下载 `.msi` 或 `.exe` 安装包：

```
plan-cascade-4.0.0-x64.msi
plan-cascade-4.0.0-setup.exe
```

### macOS

下载 `.dmg` 安装包：

```
plan-cascade-4.0.0-x64.dmg      # Intel
plan-cascade-4.0.0-arm64.dmg    # Apple Silicon
```

### Linux

下载 `.AppImage` 或 `.deb`：

```
plan-cascade-4.0.0-x86_64.AppImage
plan-cascade-4.0.0-amd64.deb
```

从 [GitHub Releases](https://github.com/Taoidle/plan-cascade/releases) 下载最新版本。

---

## 界面概览

```
┌─────────────────────────────────────────────────────────────────┐
│  Plan Cascade                        [Simple ▼] [⚙ Settings]   │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─ 任务输入 ─────────────────────────────────────────────────┐│
│  │                                                              ││
│  │  实现用户登录功能，支持 OAuth 和手机验证码                 ││
│  │                                                              ││
│  │                                        [开始执行]           ││
│  └──────────────────────────────────────────────────────────────┘│
│                                                                  │
│  ┌─ 执行进度 ─────────────────────────────────────────────────┐│
│  │                                                              ││
│  │  [████████████░░░░░░░░] 60%                                 ││
│  │                                                              ││
│  │  ✓ 生成计划 (5 个任务)                                      ││
│  │  ✓ 数据库 Schema                                            ││
│  │  ✓ API 路由结构                                             ││
│  │  ⟳ OAuth 登录 (执行中...)                                   ││
│  │  ○ 手机验证码登录                                           ││
│  │  ○ 集成测试                                                 ││
│  │                                                              ││
│  └──────────────────────────────────────────────────────────────┘│
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 简单模式

### 使用流程

1. **输入需求** - 在文本框中描述你想要实现的功能
2. **点击执行** - AI 自动分析、规划、执行
3. **等待完成** - 查看实时进度

### 界面元素

- **输入框** - 支持多行输入
- **进度条** - 整体完成百分比
- **任务列表** - Stories 执行状态
- **日志面板** - 错误和警告信息

---

## 专家模式

### 使用流程

1. **输入需求** - 描述功能
2. **生成 PRD** - 查看 AI 生成的计划
3. **编辑调整** - 修改 Stories、依赖、Agent
4. **执行监控** - 详细日志和进度

### PRD 编辑器

```
┌─ PRD 编辑器 ─────────────────────────────────────────────────────┐
│                                                                   │
│  执行策略:                              AI 建议: Hybrid Auto     │
│  ○ 直接执行   ● Hybrid Auto   ○ Mega Plan                       │
│                                                                   │
│  □ 使用 Git Worktree 隔离开发                                    │
│                                                                   │
│  Stories:                                             [+ 添加]   │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ ☐ 设计数据库 Schema                                         │ │
│  │   Priority: high  │  Agent: [claude-code ▼]                 │ │
│  │   Dependencies: none                         [编辑] [删除]  │ │
│  ├─────────────────────────────────────────────────────────────┤ │
│  │ ☐ 实现 OAuth 登录                                           │ │
│  │   Priority: medium │  Agent: [aider ▼]                      │ │
│  │   Dependencies: [Schema ▼]                   [编辑] [删除]  │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                   │
│  质量门控: [✓] TypeCheck  [✓] Test  [✓] Lint  [ ] Custom        │
│                                                                   │
│                               [保存草稿]  [开始执行]             │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

### 依赖关系可视化

```
┌─ 依赖图 ─────────────────────────────────────────────────────────┐
│                                                                   │
│         ┌─────────────┐                                          │
│         │   Schema    │                                          │
│         └──────┬──────┘                                          │
│                │                                                  │
│       ┌────────┴────────┐                                        │
│       ▼                 ▼                                        │
│  ┌─────────┐       ┌─────────┐                                   │
│  │  OAuth  │       │   SMS   │                                   │
│  └────┬────┘       └────┬────┘                                   │
│       │                 │                                        │
│       └────────┬────────┘                                        │
│                ▼                                                  │
│         ┌─────────────┐                                          │
│         │    Test     │                                          │
│         └─────────────┘                                          │
│                                                                   │
│  批次 1: [Schema]                                                │
│  批次 2: [OAuth, SMS]                                            │
│  批次 3: [Test]                                                  │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

---

## 设置页面

### 后端配置

```
┌─ 设置 > 后端配置 ────────────────────────────────────────────────┐
│                                                                   │
│  主后端:                                                          │
│  ● Claude Code（推荐，无需 API Key）                             │
│  ○ Claude API    [API Key: ••••••••••]                           │
│  ○ OpenAI        [API Key: ••••••••••] [Model: gpt-4o ▼]         │
│  ○ DeepSeek      [API Key: ••••••••••]                           │
│  ○ Ollama        [URL: http://localhost:11434]                   │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

### Agent 配置

```
┌─ 设置 > Agent 配置 ──────────────────────────────────────────────┐
│                                                                   │
│  执行 Agent:                                          [+ 添加]   │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ ✓ claude-code                                    [默认]     │ │
│  │   └─ 路径: claude                                           │ │
│  ├─────────────────────────────────────────────────────────────┤ │
│  │ ✓ aider                                          [配置]     │ │
│  │   └─ 命令: aider --model gpt-4o                             │ │
│  ├─────────────────────────────────────────────────────────────┤ │
│  │ □ codex (未配置)                                 [配置]     │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                   │
│  Agent 自动选择策略:                                              │
│  ○ 智能匹配（根据任务类型自动选择）                               │
│  ● 优先使用: [claude-code ▼]                                     │
│  ○ 手动指定（每个 Story 单独选择）                                │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

### 质量门控配置

```
┌─ 设置 > 质量门控 ────────────────────────────────────────────────┐
│                                                                   │
│  默认启用的检查:                                                  │
│  [✓] TypeCheck (tsc / mypy / pyright)                            │
│  [✓] Test (pytest / jest / npm test)                             │
│  [✓] Lint (eslint / ruff)                                        │
│  [ ] Custom                                                       │
│                                                                   │
│  自定义脚本:                                                      │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ npm run validate                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                   │
│  重试设置:                                                        │
│  最大重试次数: [3]                                                │
│  重试间隔: [指数退避 ▼]                                          │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

---

## Claude Code GUI 模式

Desktop 可作为 Claude Code 的完整图形界面：

```
┌─ Claude Code GUI 模式 ───────────────────────────────────────────┐
│                                                                   │
│  ┌─ 对话视图 ─────────────────────────────────────────────────┐  │
│  │ User: 实现用户登录功能                                      │  │
│  │                                                              │  │
│  │ Claude: 我来帮你实现用户登录功能。首先让我分析一下项目...   │  │
│  │                                                              │  │
│  │ [Reading src/auth/...]                                       │  │
│  │ [Writing src/auth/login.py...]                               │  │
│  │                                                              │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  ┌─ 工具调用 ─────────────────────────────────────────────────┐  │
│  │ ✓ Read src/auth/base.py                                     │  │
│  │ ✓ Read src/auth/oauth.py                                    │  │
│  │ ⟳ Edit src/auth/login.py                                    │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  ┌─ 文件变更预览 ─────────────────────────────────────────────┐  │
│  │ - old_code()                                                 │  │
│  │ + new_code()                                                 │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  ┌────────────────────────────────────────────────────────────┐   │
│  │ 输入消息...                                        [发送]  │   │
│  └────────────────────────────────────────────────────────────┘   │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

---

## 技术栈

| 组件 | 技术 | 说明 |
|------|------|------|
| 框架 | Tauri | 轻量跨平台 (~10MB) |
| 前端 | React + TypeScript | 成熟生态 |
| 状态管理 | Zustand | 轻量易用 |
| UI 组件 | Radix UI + Tailwind | 可访问性好 |
| 后端 | Python Sidecar (FastAPI) | 复用核心代码 |

---

## 开发进度

Desktop 应用目前处于 **Phase 2** 规划阶段：

| 功能 | 状态 |
|------|------|
| Tauri 框架搭建 | ⏳ 规划中 |
| 简单模式 UI | ⏳ 规划中 |
| 专家模式 UI | ⏳ 规划中 |
| PRD 编辑器 | ⏳ 规划中 |
| 依赖图可视化 | ⏳ 规划中 |
| Claude Code GUI | ⏳ 规划中 |
| 设置页面 | ⏳ 规划中 |
| 多平台构建 | ⏳ 规划中 |

预计发布时间：Phase 2 完成后

---

## 与 CLI 的区别

| 特性 | Desktop | CLI |
|------|---------|-----|
| 界面 | 图形化 | 命令行 |
| PRD 编辑 | 可视化拖拽 | 文本编辑 |
| 进度监控 | 实时图形 | 文本输出 |
| 依赖关系 | 可视化图 | 文本列表 |
| 文件变更 | Diff 预览 | 日志输出 |
| 适用场景 | 偏好 GUI | 偏好 CLI |

两者共享相同的核心代码，功能完全一致。
